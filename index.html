<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Evidence - Descubra a arquitetura oculta da sua psique através de uma jornada interativa de autodescoberta.">
  <meta name="theme-color" content="#F0E5FD">
  
  <title>Evidence - Descobrimento Psicológico</title>
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@600;700;800&display=swap" rel="stylesheet">
  
  <!-- Styles -->
  <link rel="stylesheet" href="./css/styles.css">
  
  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='75' font-size='75' fill='%23A7C7E7'>✨</text></svg>">
</head>
<body>
  <!-- Header with Language Toggle -->
  <header class="header">
    <button class="language-toggle" id="language-toggle" title="Toggle language">
      <span id="language-text">EN</span>
    </button>
  </header>

  <!-- Main Application Container -->
  <main id="app"></main>

  <!-- Footer -->
  <footer class="footer">
    <p id="footer-text">original por Fabiano Saft</p>
  </footer>

  <!-- Scripts -->
  <!-- Load modules in order: storage → i18n → app -->
  <script src="./js/storage.js"></script>
  <script src="./js/i18n.js"></script>
  <script src="./js/app.js"></script>

  <!-- Optional: html2canvas for card download feature -->
  <!-- Uncomment to enable PNG export functionality -->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script> -->

  <script>
    /**
     * Initialize language toggle button
     * Updates text and listens for language changes
     */
    document.addEventListener('DOMContentLoaded', () => {
      const languageToggle = document.getElementById('language-toggle');
      const languageText = document.getElementById('language-text');
      const footerText = document.getElementById('footer-text');

      // Update button text based on current language
      const updateLanguageButton = () => {
        const currentLang = i18n.getLanguage();
        languageText.textContent = currentLang === 'pt' ? 'EN' : 'PT';
      };

      // Update footer text
      const updateFooterText = () => {
        footerText.textContent = i18n.t('app.credit');
      };

      // Initial update
      updateLanguageButton();
      updateFooterText();

      // Language toggle click handler
      languageToggle.addEventListener('click', () => {
        i18n.toggleLanguage();
      });

      // Listen for language changes
      window.addEventListener('languageChanged', () => {
        updateLanguageButton();
        updateFooterText();
      });
    });
  </script>
</body>
</html>
